<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Mapper.AdminMapper.AdminMapper">
    <!-- namespace.id 确定使用哪个sql语句
    		 resultType：返回数据类型,只能有一个
    		 parameterType：输入参数类型，只能有一个
    -->
    <!-- 管理员登录 -->
    <select id="AdminLogin" resultType="Admin" parameterType="int">
        select * from Admin where id = #{id}
    </select>

    <!-- 查询所有物品 -->
    <select id="QueryAllItem" resultType="Item">
        SELECT * FROM Item
    </select>

    <select id="QueryAllGW" resultType="Goods_warehouse">
        SELECT * FROM Goods_warehouse
    </select>

    <!-- 一对一关联 仓库内物品信息 -->
    <select id="QueryItemById" parameterType="int" resultMap="w_i_map">
        SELECT Warehouse.*,Item.* from Item INNER JOIN Warehouse
        ON Item.warehouse_number = Warehouse.id
        WHERE Warehouse.id = #{id}
    </select>

    <resultMap id="w_i_map" type="Warehouse">
        <!-- Warehouse类 -->
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="type" column="type"/>
        <result property="inventory_amount" column="inventory_amount"/>

        <!-- 一对一关联查询 对象属性与字段的映射 -->
        <association property="item" javaType="Item">
            <id property="id" column="id"/>
            <result property="name" column="name"/>
            <result property="measurement" column="measurement"/>
            <result property="quantity" column="quantity"/>
            <result property="price" column="price"/>
        </association>
    </resultMap>

    <!-- 一对多关联查询 仓库内物品信息 -->
    <select id="QueryAllItemById" resultMap="w_i_maps" parameterType="int">
         SELECT Warehouse.*,Item.* from Item INNER JOIN Warehouse
        ON Item.warehouse_number = Warehouse.id
        WHERE Warehouse.id = #{id}
    </select>

    <resultMap id="w_i_maps" type="Warehouse">
        <!-- Warehouse类 -->
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="type" column="type"/>
        <result property="inventory_amount" column="inventory_amount"/>

        <!-- 一对多关联查询 对象属性与字段的映射 -->
        <collection property="itemList" ofType="Item">
            <id property="id" column="id"/>
            <result property="name" column="name"/>
            <result property="measurement" column="measurement"/>
            <result property="warehouse_number" column="warehouse_number"/>
            <result property="quantity" column="quantity"/>
            <result property="price" column="price"/>
        </collection>
    </resultMap>

    <!-- 查询所有仓库信息 -->
    <select id="selectAllWarehouse" resultType="Warehouse">
        SELECT * FROM Warehouse
    </select>

    <select id="QueryItemByW_num" resultType="Item" parameterType="int">
        SELECT * FROM Item WHERE warehouse_number = #{warehouse_number}
    </select>

</mapper>